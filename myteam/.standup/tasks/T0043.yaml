id: 43
title: Replace mute emoji with SVG icon and add voice-to-text mic button
description: "Two small UI changes in scripts/web.py:\n\n## 1. Replace mute toggle\
  \ emoji with flat SVG icon\n\nThe current mute toggle uses emoji characters (\U0001F514\
  /\U0001F515 via String.fromCodePoint). Replace with clean inline SVG icons that\
  \ match the UI's flat, monochrome style.\n\nUnmuted state \u2014 simple speaker\
  \ with sound waves:\n<svg width='16' height='16' viewBox='0 0 16 16' fill='none'\
  \ stroke='currentColor' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'><polygon\
  \ points='2,6 2,10 5,10 9,13 9,3 5,6'/><path d='M11.5 5.5a3.5 3.5 0 0 1 0 5'/></svg>\n\
  \nMuted state \u2014 speaker with X:\n<svg width='16' height='16' viewBox='0 0 16\
  \ 16' fill='none' stroke='currentColor' stroke-width='1.5' stroke-linecap='round'\
  \ stroke-linejoin='round'><polygon points='2,6 2,10 5,10 9,13 9,3 5,6'/><line x1='12'\
  \ y1='5' x2='15' y2='11'/><line x1='15' y1='5' x2='12' y2='11'/></svg>\n\nUpdate\
  \ _updateMuteBtn() to set innerHTML instead of textContent. Use the SVGs above.\n\
  \nUpdate the .mute-toggle CSS to add: display: flex; align-items: center; justify-content:\
  \ center; line-height: 1; (so the SVG centers properly).\n\n## 2. Add voice-to-text\
  \ microphone button in chat input\n\nAdd a mic button to the chat input bar (between\
  \ the text input and Send button) using the Web Speech API for speech-to-text.\n\
  \n### HTML\nAdd before the Send button in the chat-input div:\n<button class='mic-btn'\
  \ id='micBtn' onclick='toggleMic()' title='Voice input' aria-label='Voice input'\
  \ style='display:none'>\n  <svg width='16' height='16' viewBox='0 0 16 16' fill='none'\
  \ stroke='currentColor' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'>\n\
  \    <rect x='5.5' y='1' width='5' height='9' rx='2.5'/>\n    <path d='M3 7.5a5\
  \ 5 0 0 0 10 0'/>\n    <line x1='8' y1='12.5' x2='8' y2='15'/>\n    <line x1='5.5'\
  \ y1='15' x2='10.5' y2='15'/>\n  </svg>\n</button>\n\nThe button starts with display:none\
  \ and is shown via JS only if the browser supports SpeechRecognition.\n\n### CSS\n\
  .chat-input .mic-btn { padding: 10px 12px; border-radius: 8px; border: 1px solid\
  \ rgba(255,255,255,0.1); background: #111113; color: #888; font-size: 16px; cursor:\
  \ pointer; transition: background 0.15s, color 0.15s, border-color 0.15s; display:\
  \ flex; align-items: center; justify-content: center; line-height: 1; }\n.chat-input\
  \ .mic-btn:hover { border-color: rgba(255,255,255,0.25); color: #ccc; }\n.chat-input\
  \ .mic-btn.recording { background: rgba(239,68,68,0.15); border-color: rgba(239,68,68,0.4);\
  \ color: #ef4444; animation: mic-pulse 1.5s ease-in-out infinite; }\n@keyframes\
  \ mic-pulse { 0%, 100% { box-shadow: 0 0 0 0 rgba(239,68,68,0.3); } 50% { box-shadow:\
  \ 0 0 0 6px rgba(239,68,68,0); } }\n\n### JavaScript\nAdd at the end of the script\
  \ (before initFromHash):\n\nlet _recognition = null;\nlet _micActive = false;\n\
  let _micStopping = false;\nlet _micBaseText = '';\nlet _micFinalText = '';\n\n(function\
  \ initMic() {\n  const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n\
  \  if (!SpeechRecognition) return;\n  const micBtn = document.getElementById('micBtn');\n\
  \  micBtn.style.display = 'flex';\n  _recognition = new SpeechRecognition();\n \
  \ _recognition.continuous = true;\n  _recognition.interimResults = true;\n  _recognition.lang\
  \ = navigator.language || 'en-US';\n  _recognition.onresult = function(e) {\n  \
  \  let interim = '';\n    for (let i = e.resultIndex; i < e.results.length; i++)\
  \ {\n      if (e.results[i].isFinal) {\n        _micFinalText += e.results[i][0].transcript;\n\
  \      } else {\n        interim += e.results[i][0].transcript;\n      }\n    }\n\
  \    document.getElementById('msgInput').value = _micBaseText + _micFinalText +\
  \ interim;\n  };\n  _recognition.onend = function() {\n    _micActive = false; _micStopping\
  \ = false;\n    micBtn.classList.remove('recording'); micBtn.title = 'Voice input';\n\
  \  };\n  _recognition.onerror = function(e) {\n    if (e.error !== 'aborted' &&\
  \ e.error !== 'no-speech') console.warn('Speech recognition error:', e.error);\n\
  \    _micActive = false; _micStopping = false;\n    micBtn.classList.remove('recording');\
  \ micBtn.title = 'Voice input';\n  };\n})();\n\nfunction toggleMic() {\n  if (!_recognition\
  \ || _micStopping) return;\n  const micBtn = document.getElementById('micBtn');\n\
  \  if (_micActive) {\n    _micStopping = true; _recognition.stop();\n    micBtn.classList.remove('recording');\
  \ micBtn.title = 'Voice input';\n  } else {\n    const input = document.getElementById('msgInput');\n\
  \    _micBaseText = input.value ? input.value + ' ' : '';\n    _micFinalText = '';\n\
  \    try { _recognition.start(); } catch(e) { return; }\n    _micActive = true;\n\
  \    micBtn.classList.add('recording'); micBtn.title = 'Stop recording';\n  }\n\
  }\n\nAlso add to sendMsg() at the top (before the empty check):\n  if (_micActive\
  \ && _recognition) { _recognition.stop(); _micActive = false; const mb = document.getElementById('micBtn');\
  \ if (mb) { mb.classList.remove('recording'); mb.title = 'Voice input'; } }\n\n\
  This auto-stops recording when the user sends a message.\n\nAll changes in scripts/web.py.\n\
  Branch: john/standup-ui/043-mute-icon-and-mic\nCode lives in /Users/nikhil/dev/standup/.\n\
  Message edison when done."
status: done
assignee: mark
reviewer: ''
project: standup-ui
priority: medium
created_at: '2026-02-08T19:58:02.448266Z'
updated_at: '2026-02-08T20:20:19.164661Z'
completed_at: '2026-02-08T20:20:19.160525Z'
depends_on: []
branch: ''
commits: []
