/* diff2html styles (bundled by esbuild) */
@import 'diff2html/bundles/css/diff2html.min.css';

/* ================================================================
   Variables — Grayscale palette inspired by VS Code / Cursor
   Colors used sparingly with semantic meaning:
     Red    = boss attention needed
     Orange = off track / warning
     Yellow = in progress
     Green  = done / healthy
   ================================================================ */
* { box-sizing: border-box; margin: 0; padding: 0; }
html, body { height: 100%; }

:root {
  /* ── Backgrounds ── */
  --bg-primary:   #1e1e1e;
  --bg-sidebar:   #252526;
  --bg-surface:   #252526;
  --bg-elevated:  #2d2d2d;
  --bg-hover:     #2a2a2a;
  --bg-active:    #37373d;
  --bg-input:     #313131;
  --bg-inset:     #1a1a1a;

  /* ── Borders — minimal ── */
  --border-default: #333333;
  --border-subtle:  #2a2a2a;
  --border-input:   #3c3c3c;
  --border-focus:   #007fd4;

  /* ── Text ── */
  --text-primary:   #bababa;
  --text-secondary: #858585;
  --text-muted:     #5a5a5a;
  --text-faint:     #3e3e3e;
  --text-heading:   #d0d0d0;

  /* ── Accent — used very sparingly ── */
  --accent:        #569cd6;
  --accent-hover:  #6cb0e0;
  --accent-muted:  rgba(86,156,214,0.08);

  /* ── Semantic colors (dots, borders only) ── */
  --semantic-red:    #f14c4c;
  --semantic-orange: #cca700;
  --semantic-yellow: #e2c08d;
  --semantic-green:  #73c991;
  --semantic-gray:   #555555;

  /* ── Backwards-compat aliases ── */
  --bg-body:        var(--bg-primary);
  --bg-panel-body:  var(--bg-primary);
  --accent-blue:    var(--accent);
  --accent-green:   var(--semantic-green);
  --accent-green-glow: rgba(115,201,145,0.3);

  /* ── Buttons ── */
  --btn-bg:    #cccccc;
  --btn-text:  #1e1e1e;
  --btn-hover: #aaaaaa;

  /* ── Scrollbar ── */
  --scrollbar-thumb: #333333;
  --scrollbar-hover: #555555;

  /* ── Diff ── */
  --diff-add-bg:   rgba(115,201,145,0.12);
  --diff-add-text: #73c991;
  --diff-del-bg:   rgba(241,76,76,0.12);
  --diff-del-text: #e88b8b;
  --diff-ctx-text: var(--text-muted);
  --diff-hunk-bg:  rgba(86,156,214,0.06);

  /* ── Backdrop ── */
  --backdrop-bg: rgba(0,0,0,0.55);

  /* ── Status dots — semantic color mapping ──
     Red:    boss attention needed (in_approval, merge_failed)
     Orange: off track (rejected)
     Yellow: in progress (in_progress, in_review, merging)
     Green:  done/healthy
     Gray:   neutral (todo, cancelled)
  */
  --status-todo:           var(--semantic-gray);
  --status-todo-bg:        rgba(85,85,85,0.10);
  --status-in-progress:    var(--semantic-yellow);
  --status-in-progress-bg: rgba(226,192,141,0.10);
  --status-in-review:      var(--semantic-yellow);
  --status-in-review-bg:   rgba(226,192,141,0.10);
  --status-in-approval:    var(--semantic-red);
  --status-in-approval-bg: rgba(241,76,76,0.10);
  --status-merging:        var(--semantic-yellow);
  --status-merging-bg:     rgba(226,192,141,0.10);
  --status-done:           var(--semantic-green);
  --status-done-bg:        rgba(115,201,145,0.10);
  --status-rejected:       var(--semantic-orange);
  --status-rejected-bg:    rgba(204,167,0,0.10);
  --status-merge_failed:   var(--semantic-orange);
  --status-merge_failed-bg:rgba(204,167,0,0.10);
  --status-cancelled:      var(--semantic-gray);
  --status-cancelled-bg:   rgba(85,85,85,0.10);

  /* ── Agent status dots ──
     Green:  active (healthy)
     Orange: stale (may be stuck)
     Red:    stuck (needs attention)
     Gray:   offline
  */
  --dot-active:  var(--semantic-green);
  --dot-stale:   var(--semantic-orange);
  --dot-stuck:   var(--semantic-red);
  --dot-offline: var(--semantic-gray);
}

/* ================================================================
   diff2html dark overrides
   ================================================================ */
.d2h-wrapper { --d2h-bg-color: var(--bg-surface); --d2h-border-color: var(--border-subtle); }
.d2h-file-header { background: var(--bg-hover) !important; border-color: var(--border-subtle) !important; }
.d2h-file-wrapper { border-color: var(--border-subtle) !important; }
.d2h-code-line, .d2h-code-side-line { background: var(--bg-surface) !important; color: var(--text-secondary) !important; }
.d2h-code-line-ctn { color: var(--text-secondary) !important; }
.d2h-file-diff .d2h-ins.d2h-change, .d2h-file-diff .d2h-ins { background-color: var(--diff-add-bg) !important; }
.d2h-file-diff .d2h-del.d2h-change, .d2h-file-diff .d2h-del { background-color: var(--diff-del-bg) !important; }
.d2h-info { background: var(--diff-hunk-bg) !important; color: var(--text-muted) !important; border-color: var(--border-subtle) !important; }
.d2h-code-linenumber { color: var(--text-faint) !important; background: var(--bg-surface) !important; border-color: var(--border-subtle) !important; }
.d2h-file-name { color: var(--text-primary) !important; }
.d2h-tag { background: var(--bg-active) !important; color: var(--text-secondary) !important; }
.d2h-ins .d2h-code-line-ctn { color: var(--diff-add-text) !important; }
.d2h-del .d2h-code-line-ctn { color: var(--diff-del-text) !important; }
.d2h-code-linenumber, .d2h-code-side-linenumber { position: static !important; }
.d2h-file-header { position: static !important; }

/* ================================================================
   Layout — no top header, sidebar + main
   ================================================================ */
body {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  background: var(--bg-body);
  color: var(--text-primary);
  font-size: 14px;
  line-height: 1.5;
  letter-spacing: -0.01em;
  display: flex;
  flex-direction: row;
  -webkit-font-smoothing: antialiased;
}
#app { display: flex; flex-direction: row; width: 100%; height: 100%; min-height: 0; }
.main { flex: 1; display: flex; flex-direction: column; min-height: 0; height: 100vh; }
.content { width: 100%; max-width: 960px; margin: 0 auto; padding: 16px 24px; flex: 1; display: flex; flex-direction: column; min-height: 0; }
.panel { display: none; }
.panel.active { display: flex; flex-direction: column; flex: 1; min-height: 0; position: relative; }

/* ================================================================
   Sidebar — collapsible, minimal
   ================================================================ */
.sb {
  width: 240px;
  min-width: 240px;
  height: 100vh;
  position: sticky;
  top: 0;
  background: var(--bg-sidebar);
  border-right: 1px solid var(--border-default);
  display: flex;
  flex-direction: column;
  overflow-y: auto;
  overflow-x: hidden;
  transition: width 150ms ease, min-width 150ms ease;
}
.sb-collapsed {
  width: 48px;
  min-width: 48px;
}

/* Top: logo + collapse toggle */
.sb-top {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 14px 12px 10px;
  flex-shrink: 0;
  border-bottom: 1px solid var(--border-subtle);
  margin-bottom: 4px;
}
.sb-collapsed .sb-top {
  justify-content: center;
  padding: 14px 0 10px;
}
.sb-logo { flex-shrink: 0; }
.sb-logo svg { display: block; opacity: 0.6; }
.sb-toggle {
  background: none;
  border: none;
  color: var(--text-muted);
  cursor: pointer;
  padding: 4px;
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: color 100ms;
  flex-shrink: 0;
}
.sb-toggle:hover { color: var(--text-primary); }

/* Nav buttons */
.sb-nav {
  display: flex;
  flex-direction: column;
  gap: 2px;
  padding: 8px 8px 12px;
  flex-shrink: 0;
}
.sb-collapsed .sb-nav { padding: 8px 6px 12px; }

.sb-nav-btn {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 7px 10px;
  border: none;
  background: none;
  color: var(--text-secondary);
  font-family: inherit;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  border-radius: 6px;
  transition: color 100ms, background 100ms;
}
.sb-nav-btn:hover { color: var(--text-primary); background: var(--bg-hover); }
.sb-nav-btn.active { color: var(--text-heading); background: var(--bg-active); }
.sb-collapsed .sb-nav-btn {
  justify-content: center;
  padding: 8px;
}
.sb-nav-label { white-space: nowrap; }

/* Widgets area */
.sb-widgets {
  flex: 1;
  overflow-y: auto;
  padding: 0 8px;
}

/* Widget */
.sb-widget {
  padding: 10px 0;
  border-top: 1px solid var(--border-subtle);
}
.sb-widget:first-child { border-top: none; }
.sb-widget-header {
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--text-muted);
  margin-bottom: 6px;
  padding: 0 4px;
}

/* Shared dot */
.sb-dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  flex-shrink: 0;
  display: inline-block;
}

/* Agent dots */
.sb-dot.dot-active  { background: var(--dot-active); }
.sb-dot.dot-stale   { background: var(--dot-stale); }
.sb-dot.dot-stuck   { background: var(--dot-stuck); }
.sb-dot.dot-offline { background: var(--dot-offline); }

/* Task dots (status) */
.sb-dot.dot-todo        { background: var(--status-todo); }
.sb-dot.dot-in_progress { background: var(--status-in-progress); }
.sb-dot.dot-in_review   { background: var(--status-in-review); }
.sb-dot.dot-in_approval { background: var(--status-in-approval); }
.sb-dot.dot-merging     { background: var(--status-merging); }
.sb-dot.dot-done        { background: var(--status-done); }
.sb-dot.dot-rejected    { background: var(--status-rejected); }
.sb-dot.dot-merge_failed { background: var(--status-merge_failed); }
.sb-dot.dot-cancelled   { background: var(--status-cancelled); }

/* Agent row */
.sb-agent-row {
  display: flex;
  flex-direction: column;
  padding: 5px 4px;
  border-radius: 4px;
  cursor: pointer;
  transition: background 100ms;
}
.sb-agent-row:hover { background: var(--bg-hover); }

.sb-agent-line1 {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 12px;
}
.sb-agent-name {
  color: var(--text-primary);
  font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace;
  font-weight: 400;
  font-size: 11px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  flex: 1;
  min-width: 0;
}
.sb-agent-time {
  color: var(--text-muted);
  font-size: 11px;
  font-variant-numeric: tabular-nums;
  flex-shrink: 0;
}

.sb-agent-line2 {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 11px;
  padding-left: 14px;
  color: var(--text-muted);
  overflow: hidden;
}
.sb-agent-task {
  font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace;
  color: var(--text-secondary);
  flex-shrink: 0;
  font-size: 10px;
}
.sb-agent-tool {
  color: var(--text-muted);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace;
  font-size: 10px;
}

/* Task row */
.sb-task-row {
  display: flex;
  flex-direction: column;
  padding: 5px 4px;
  border-radius: 4px;
  cursor: pointer;
  transition: background 100ms;
}
.sb-task-row:hover { background: var(--bg-hover); }

.sb-task-line1 {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 12px;
}
.sb-task-id {
  font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace;
  color: var(--text-secondary);
  font-size: 11px;
  font-variant-numeric: tabular-nums;
  flex-shrink: 0;
}
.sb-task-title {
  color: var(--text-secondary);
  flex: 1;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  font-size: 11px;
}
.sb-task-time {
  color: var(--text-muted);
  font-size: 11px;
  font-variant-numeric: tabular-nums;
  flex-shrink: 0;
}

.sb-task-line2 {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 11px;
  padding-left: 14px;
  color: var(--text-muted);
  overflow: hidden;
}
.sb-task-assignee {
  font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace;
  color: var(--text-secondary);
  flex-shrink: 0;
  font-size: 10px;
}
.sb-task-tool {
  color: var(--text-muted);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace;
  font-size: 10px;
}

/* Team selector */
.sb-team {
  margin-top: auto;
  padding: 10px 12px;
  border-top: 1px solid var(--border-subtle);
  display: flex;
  align-items: center;
  justify-content: space-between;
  cursor: pointer;
  user-select: none;
  position: relative;
  flex-shrink: 0;
}
.sb-team.single { cursor: default; }
.sb-team-name {
  font-size: 12px;
  font-weight: 500;
  color: var(--text-secondary);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.sb-team-chevron {
  font-size: 10px;
  color: var(--text-muted);
  transition: transform 150ms ease;
}
.sb-team:hover:not(.single) { background: var(--bg-hover); }
.sb-team-dropdown {
  position: absolute;
  bottom: 100%;
  left: 0;
  right: 0;
  background: var(--bg-elevated);
  border: 1px solid var(--border-default);
  border-radius: 6px;
  z-index: 100;
  max-height: 200px;
  overflow-y: auto;
  margin-bottom: 4px;
  box-shadow: 0 -4px 16px rgba(0,0,0,0.25);
}
.sb-team-option {
  padding: 8px 12px;
  font-size: 12px;
  color: var(--text-secondary);
  cursor: pointer;
  transition: background 100ms, color 100ms;
}
.sb-team-option:hover { background: var(--bg-active); color: var(--text-primary); }
.sb-team-option.active { color: var(--text-primary); font-weight: 500; }

@media (max-width: 900px) { .sb { display: none; } }

/* ================================================================
   Tasks panel
   ================================================================ */
.task-list { display: flex; flex-direction: column; gap: 1px; }
.task-row {
  cursor: pointer;
  border-radius: 6px;
  transition: background 100ms;
}
.task-row:hover { background: var(--bg-hover); }
.task-summary {
  display: grid;
  grid-template-columns: 56px 1fr auto auto auto;
  gap: 12px;
  align-items: center;
  justify-items: start;
  padding: 10px 12px;
  font-size: 13px;
}
.task-summary > span { white-space: nowrap; }
.task-id {
  color: var(--text-muted);
  font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace;
  font-variant-numeric: tabular-nums;
  font-size: 12px;
}
.task-title { color: var(--text-primary); font-weight: 400; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.task-assignee { font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace; color: var(--text-secondary); font-size: 12px; min-width: 70px; text-align: left; }
.task-priority { color: var(--text-muted); font-size: 12px; min-width: 50px; text-align: left; }

/* ================================================================
   Badges — pill with semantic colored dot
   ================================================================ */
.badge {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 3px 8px;
  border-radius: 4px;
  font-size: 11px;
  font-weight: 500;
  color: var(--text-secondary);
  background: var(--bg-active);
}
.badge::before {
  content: '';
  width: 6px;
  height: 6px;
  border-radius: 50%;
  flex-shrink: 0;
}
.badge-todo::before        { background: var(--status-todo); }
.badge-in_progress::before { background: var(--status-in-progress); }
.badge-in_review::before   { background: var(--status-in-review); }
.badge-in_approval::before { background: var(--status-in-approval); }
.badge-merging::before     { background: var(--status-merging); }
.badge-done::before        { background: var(--status-done); }
.badge-rejected::before    { background: var(--status-rejected); }
.badge-merge_failed::before { background: var(--status-merge_failed); }
.badge-cancelled::before   { background: var(--status-cancelled); }
.badge-cancelled { text-decoration: line-through; }

/* ================================================================
   Task VCS / Diff buttons
   ================================================================ */
.diff-btn, .btn-diff {
  padding: 4px 10px;
  border-radius: 4px;
  border: 1px solid var(--border-default);
  background: transparent;
  color: var(--text-secondary);
  font-family: inherit;
  font-size: 11px;
  cursor: pointer;
  transition: color 100ms, border-color 100ms;
  margin-left: auto;
}
.diff-btn:hover, .btn-diff:hover { color: var(--text-primary); border-color: var(--text-muted); }
.task-vcs-row { display: flex; align-items: center; gap: 10px; margin-bottom: 10px; flex-wrap: wrap; }
.task-branch {
  font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace;
  font-size: 12px;
  background: var(--bg-active);
  color: var(--text-secondary);
  padding: 3px 10px;
  border-radius: 4px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 320px;
}
.task-commit {
  font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace;
  font-size: 11px;
  background: var(--bg-active);
  color: var(--text-secondary);
  padding: 2px 8px;
  border-radius: 4px;
  cursor: pointer;
  border: none;
  transition: color 100ms;
}
.task-commit:hover { color: var(--text-primary); }

/* ================================================================
   Task approval
   ================================================================ */
.task-approval-status { display: flex; flex-direction: column; gap: 6px; padding: 12px 0; margin-top: 8px; border-top: 1px solid var(--border-subtle); }
.task-review-box { margin-top: 20px; padding: 16px; border-radius: 6px; border: 1px solid var(--border-subtle); background: var(--bg-elevated); }
.task-review-box-approved { border-color: rgba(115,201,145,0.3); background: rgba(115,201,145,0.04); }
.task-review-box-rejected { border-color: rgba(241,76,76,0.3); background: rgba(241,76,76,0.04); }
.task-review-box-header { font-size: 13px; font-weight: 600; color: var(--text-heading); margin-bottom: 12px; }
.task-review-box-actions { display: flex; gap: 10px; align-items: center; }
.btn-approve {
  padding: 8px 20px;
  border-radius: 6px;
  border: 1px solid var(--semantic-green);
  background: transparent;
  color: var(--semantic-green);
  font-family: inherit;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: background 100ms;
}
.btn-approve:hover { background: rgba(115,201,145,0.10); }
.btn-approve:disabled { opacity: 0.4; cursor: not-allowed; }
.btn-reject-outline {
  padding: 8px 20px;
  border-radius: 6px;
  border: 1px solid var(--border-default);
  background: transparent;
  color: var(--text-secondary);
  font-family: inherit;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: color 100ms, border-color 100ms;
}
.btn-reject-outline:hover { color: var(--semantic-red); border-color: rgba(241,76,76,0.4); }
.btn-reject-outline:disabled { opacity: 0.4; cursor: not-allowed; }
.btn-reject {
  padding: 8px 20px;
  border-radius: 6px;
  border: 1px solid rgba(241,76,76,0.3);
  background: transparent;
  color: var(--semantic-red);
  font-family: inherit;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: background 100ms;
}
.btn-reject:hover { background: rgba(241,76,76,0.08); }
.btn-reject:disabled { opacity: 0.4; cursor: not-allowed; }
.reject-reason-input { width: 100%; padding: 8px 12px; border-radius: 6px; border: 1px solid var(--border-input); background: var(--bg-input); color: var(--text-primary); font-family: inherit; font-size: 13px; outline: none; transition: border-color 100ms; }
.reject-reason-input:focus { border-color: var(--border-focus); }
.reject-reason-row { display: flex; gap: 8px; align-items: center; margin-top: 10px; }
.approval-badge { display: inline-flex; align-items: center; gap: 6px; padding: 8px 14px; border-radius: 6px; font-size: 13px; font-weight: 500; }
.approval-badge-approved { background: rgba(115,201,145,0.08); color: var(--semantic-green); }
.approval-badge-rejected { background: rgba(241,76,76,0.08); color: var(--semantic-red); }
.approval-badge-pending  { background: rgba(226,192,141,0.08); color: var(--semantic-yellow); }
.approval-badge-merging  { background: rgba(226,192,141,0.08); color: var(--semantic-yellow); }
.approval-rejection-reason { font-size: 12px; color: var(--text-secondary); margin-top: 4px; font-style: italic; }

/* Cancel button */
.cancel-btn {
  padding: 6px 12px;
  font-size: 12px;
  border-radius: 6px;
  border: 1px solid var(--border-default);
  background: transparent;
  color: var(--text-muted);
  cursor: pointer;
  transition: color 100ms, border-color 100ms;
}
.cancel-btn:hover { color: var(--semantic-red); border-color: rgba(241,76,76,0.3); }
.cancel-btn:disabled { opacity: 0.4; cursor: not-allowed; }

/* ================================================================
   Chat
   ================================================================ */
.chat-log {
  flex: 1;
  min-height: 0;
  overflow-y: auto;
  background: var(--bg-primary);
  padding: 8px 0;
}

/* Messages */
.msg {
  padding: 8px 12px;
  border-bottom: 1px solid var(--border-subtle);
  transition: background 100ms;
}
.msg:last-child { border-bottom: none; }
.msg:hover { background: rgba(255, 255, 255, 0.02); }

/* Boss messages: subtle left border accent, very slight background lift */
.msg-boss {
  background: rgba(255, 255, 255, 0.015);
  border-left: 2px solid var(--border-default);
  padding-left: 10px;
}
.msg-boss:hover { background: rgba(255, 255, 255, 0.03); }

.msg-body { min-width: 0; }
.msg-header { display: flex; align-items: baseline; gap: 8px; margin-bottom: 3px; }
.msg-sender {
  font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace;
  font-weight: 400;
  color: var(--text-primary);
  font-size: 12px;
  cursor: pointer;
  transition: text-decoration 100ms;
}
.msg-sender:hover { text-decoration: underline; }
.msg-recipient { font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace; color: var(--text-muted); font-size: 11px; }
.msg-time { color: var(--text-faint); font-size: 11px; font-variant-numeric: tabular-nums; margin-left: auto; flex-shrink: 0; }
.msg-checkmark { flex-shrink: 0; margin-left: 4px; min-width: 16px; display: inline-block; text-align: left; }
.msg-content { color: var(--text-primary); font-size: 14px; line-height: 1.6; white-space: pre-wrap; word-break: break-word; }

/* Collapsible long messages */
.msg-content-wrapper {
  position: relative;
}

.msg-content-wrapper.collapsed .msg-content {
  max-height: 90px;
  overflow: hidden;
}

.msg-fade-overlay {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 40px;
  background: linear-gradient(transparent, #1e1e1e);
  pointer-events: none;
}

.msg-fade-overlay-boss {
  background: linear-gradient(transparent, rgba(255, 255, 255, 0.015));
}

.msg-expand-btn {
  background: none;
  border: none;
  color: var(--text-secondary);
  font-size: 12px;
  padding: 2px 0;
  cursor: pointer;
  font-family: inherit;
  margin-top: 4px;
}

.msg-expand-btn:hover {
  color: var(--text-primary);
  text-decoration: underline;
}

/* Event messages */
.msg-event { display: flex; align-items: flex-start; gap: 12px; padding: 4px 12px; margin: 2px 0; }
.msg-event-icon { width: 20px; display: flex; align-items: center; justify-content: center; flex-shrink: 0; color: var(--text-faint); padding-top: 1px; }
.msg-event-text { flex: 1; color: var(--text-muted); font-size: 12px; line-height: 1.4; }
.msg-event-time { color: var(--text-faint); font-size: 11px; font-variant-numeric: tabular-nums; white-space: nowrap; flex-shrink: 0; margin-left: auto; padding-right: 20px; }

/* Task separator and badge (left side, next to sender) */
.msg-task-sep { color: var(--text-faint); font-size: 11px; flex-shrink: 0; }
.msg-task-badge {
  flex-shrink: 0;
  font-size: 10px;
  font-weight: 500;
  font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace;
  color: var(--text-muted);
  padding: 1px 6px;
  border-radius: 4px;
  cursor: pointer;
  margin-left: 4px;
  transition: color 100ms;
}
.msg-task-badge:hover { color: var(--text-primary); text-decoration: underline; }
.msg-status { font-size: 10px; font-weight: 400; letter-spacing: -0.5px; }
.msg-delivered { color: var(--text-faint); }
.msg-seen { color: var(--text-muted); }
.msg-processed { color: var(--text-secondary); }

/* Jump to bottom */
.chat-jump-btn {
  position: absolute;
  bottom: 90px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 10;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  border: 1px solid var(--border-default);
  background: var(--bg-elevated);
  color: var(--text-secondary);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 2px 8px rgba(0,0,0,0.3);
  transition: color 100ms;
}
.chat-jump-btn:hover { color: var(--text-primary); }

/* ================================================================
   Chat input — Cursor-style
   ================================================================ */
.chat-input-box {
  border: 1px solid var(--border-default);
  border-radius: 10px;
  background: var(--bg-elevated);
  margin: 8px 0 4px;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  flex-shrink: 0;
  transition: border-color 150ms;
}
.chat-input-box:focus-within { border-color: var(--text-muted); }

.chat-input-box textarea {
  border: none;
  background: transparent;
  color: var(--text-primary);
  font-family: inherit;
  font-size: 14px;
  line-height: 21px;
  outline: none;
  resize: none;
  min-height: 63px;
  max-height: 200px;
  overflow-y: auto;
  padding: 12px 14px 6px;
}
.chat-input-box textarea::placeholder { color: var(--text-muted); }

/* Toolbar at bottom of input box */
.chat-input-toolbar {
  display: flex;
  align-items: center;
  gap: 2px;
  padding: 4px 8px 6px;
}
.chat-input-toolbar-spacer { flex: 1; }

.chat-tool-btn {
  width: 28px;
  height: 28px;
  border-radius: 4px;
  border: none;
  background: transparent;
  color: var(--text-muted);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: color 100ms;
  flex-shrink: 0;
}
.chat-tool-btn:hover { color: var(--text-primary); }
.chat-tool-btn.recording { color: var(--semantic-red); }
.chat-tool-btn.send-btn.active {
  color: var(--text-primary);
  background: var(--bg-active);
  border-radius: 6px;
}

/* ================================================================
   Chat filters — minimal row
   ================================================================ */
.chat-filters, .task-filters {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 8px;
  flex-shrink: 0;
  flex-wrap: wrap;
}
/* ── Global select styling ── */
select {
  appearance: none;
  -webkit-appearance: none;
  padding: 5px 26px 5px 10px;
  border-radius: 6px;
  border: 1px solid var(--border-default);
  background: var(--bg-input) url("data:image/svg+xml,%3Csvg width='10' height='6' viewBox='0 0 10 6' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1l4 4 4-4' stroke='%23858585' stroke-width='1.5' fill='none' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E") no-repeat right 8px center;
  color: var(--text-secondary);
  font-family: inherit;
  font-size: 12px;
  line-height: 1.4;
  outline: none;
  cursor: pointer;
  transition: border-color 100ms, color 100ms;
}
select:hover { border-color: var(--text-muted); color: var(--text-primary); }
select:focus { border-color: var(--border-focus); }
select option {
  background: #2d2d2d;
  color: #cccccc;
  padding: 6px 10px;
  font-size: 13px;
}
select option:checked {
  background: #37373d;
  color: #e0e0e0;
}
select option:hover {
  background: #37373d;
}
.chat-filters select, .task-filters select {
  /* inherits global select styles */
}
.chat-filters label, .task-filters label {
  display: flex;
  align-items: center;
  gap: 5px;
  color: var(--text-muted);
  font-size: 12px;
  cursor: pointer;
  user-select: none;
}
.chat-filters input[type="checkbox"], .task-filters input[type="checkbox"] {
  appearance: none;
  width: 14px;
  height: 14px;
  border: 1px solid var(--border-input);
  border-radius: 3px;
  background: transparent;
  cursor: pointer;
  position: relative;
}
.chat-filters input[type="checkbox"]:checked, .task-filters input[type="checkbox"]:checked {
  background: var(--text-secondary);
  border-color: var(--text-secondary);
}
.chat-filters input[type="checkbox"]:checked::after, .task-filters input[type="checkbox"]:checked::after {
  content: '';
  position: absolute;
  top: 1px;
  left: 4px;
  width: 4px;
  height: 8px;
  border: solid var(--bg-primary);
  border-width: 0 1.5px 1.5px 0;
  transform: rotate(45deg);
}
.filter-arrow {
  cursor: pointer;
  user-select: none;
  font-size: 16px;
  color: var(--text-muted);
  padding: 2px 4px;
  border-radius: 4px;
  transition: color 100ms;
  line-height: 1;
}
.filter-arrow:hover { color: var(--text-primary); }
.filter-arrow.bidi { color: var(--semantic-green); }
.filter-search-wrap { position: relative; flex: 1; min-width: 120px; }
.filter-search-icon { position: absolute; left: 10px; top: 50%; transform: translateY(-50%); color: var(--text-faint); pointer-events: none; }
.filter-search {
  width: 100%;
  padding: 5px 10px 5px 30px;
  border-radius: 6px;
  border: 1px solid var(--border-default);
  background: var(--bg-input);
  color: var(--text-primary);
  font-family: inherit;
  font-size: 12px;
  outline: none;
  transition: border-color 100ms;
}
.filter-search:focus { border-color: var(--text-muted); }
.filter-search::placeholder { color: var(--text-faint); }
.filter-label { color: var(--text-faint); font-size: 11px; text-transform: uppercase; letter-spacing: 0.06em; }

/* ================================================================
   Agents panel
   ================================================================ */
.agent-card, .agent-card-rich {
  background: var(--bg-surface);
  border: 1px solid var(--border-subtle);
  border-radius: 6px;
  padding: 12px;
  margin-bottom: 6px;
  cursor: pointer;
  transition: background 100ms, border-color 100ms;
  display: flex;
  flex-direction: column;
  gap: 6px;
}
.agent-card:hover, .agent-card-rich:hover { background: var(--bg-hover); border-color: var(--border-default); }

.agent-card-row1 { display: flex; align-items: center; gap: 8px; }
.agent-card-dot { width: 7px; height: 7px; border-radius: 50%; flex-shrink: 0; }
.agent-card-dot-active  { background: var(--dot-active); }
.agent-card-dot-stale   { background: var(--dot-stale); }
.agent-card-dot-stuck   { background: var(--dot-stuck); }
.agent-card-dot-offline { background: var(--dot-offline); }
.agent-card-name { font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace; font-weight: 400; font-size: 12px; color: var(--text-primary); }
.agent-card-role {
  display: inline-block;
  font-size: 10px;
  font-weight: 500;
  letter-spacing: 0.02em;
  padding: 2px 8px;
  border-radius: 4px;
  line-height: 1.4;
  background: var(--bg-active);
  color: var(--text-secondary);
}
.agent-card-task-col { margin-left: auto; flex-shrink: 0; }
.agent-card-task-link {
  font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace;
  font-size: 11px;
  color: var(--text-secondary);
  cursor: pointer;
  transition: text-decoration 100ms;
}
.agent-card-task-link:hover { text-decoration: underline; }
.agent-card-idle-label { font-size: 11px; color: var(--text-muted); }

.agent-card-row2 { display: flex; align-items: center; gap: 8px; padding-left: 15px; }
.agent-card-activity { font-size: 12px; color: var(--text-secondary); flex: 1; min-width: 0; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.agent-card-last-active { font-size: 11px; color: var(--text-muted); flex-shrink: 0; }

.agent-card-row3 {
  display: flex;
  align-items: center;
  gap: 12px;
  padding-left: 15px;
  padding-top: 4px;
  border-top: 1px solid var(--border-subtle);
  margin-top: 2px;
}
.agent-card-stat { display: flex; align-items: baseline; gap: 4px; }
.agent-card-stat-value { font-size: 12px; font-weight: 600; color: var(--text-primary); font-variant-numeric: tabular-nums; }
.agent-card-stat-label { font-size: 10px; color: var(--text-muted); }

.agent-name { font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace; font-weight: 400; min-width: 120px; color: var(--text-primary); font-size: 12px; }
.agent-status { font-size: 12px; color: var(--text-muted); }
.dot { width: 7px; height: 7px; border-radius: 50%; display: inline-block; margin-right: 8px; }
.dot-active { background: var(--dot-active); }
.dot-idle { background: var(--dot-offline); }

/* Agent stats grid */
.agent-stats-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; }
.agent-stat { background: var(--bg-surface); border-radius: 4px; padding: 10px 14px; }
.agent-stat-label { font-size: 10px; text-transform: uppercase; letter-spacing: 0.06em; color: var(--text-muted); margin-bottom: 4px; }
.agent-stat-value { font-size: 14px; font-weight: 600; color: var(--text-primary); font-variant-numeric: tabular-nums; }

@media (max-width: 600px) { .agent-card-row3 { flex-wrap: wrap; gap: 8px; } }

/* ================================================================
   FilterBar (Linear-style composable filters)
   ================================================================ */
.fb-bar { display: flex; align-items: center; gap: 6px; flex-wrap: wrap; min-height: 32px; }
.fb-pill { display: inline-flex; align-items: center; border: 1px solid var(--border-default); border-radius: 6px; font-size: 12px; line-height: 1; position: relative; background: var(--bg-surface); }
.fb-pill-field, .fb-pill-op, .fb-pill-value { padding: 5px 8px; cursor: pointer; transition: color 100ms; color: var(--text-secondary); user-select: none; white-space: nowrap; }
.fb-pill-field { font-weight: 500; color: var(--text-primary); border-right: 1px solid var(--border-default); }
.fb-pill-op { color: var(--text-muted); font-size: 11px; border-right: 1px solid var(--border-default); }
.fb-pill-value { color: var(--text-secondary); max-width: 200px; overflow: hidden; text-overflow: ellipsis; }
.fb-pill-field:hover, .fb-pill-op:hover, .fb-pill-value:hover { color: var(--text-primary); }
.fb-pill-remove { padding: 5px 6px; cursor: pointer; color: var(--text-muted); transition: color 100ms; font-size: 14px; line-height: 1; }
.fb-pill-remove:hover { color: var(--semantic-red); }
.fb-add-wrap { position: relative; }
.fb-add-btn { display: inline-flex; align-items: center; gap: 4px; padding: 5px 10px; border-radius: 6px; border: 1px dashed var(--border-default); background: transparent; color: var(--text-muted); font-family: inherit; font-size: 12px; cursor: pointer; transition: color 100ms, border-color 100ms; }
.fb-add-btn:hover { color: var(--text-primary); border-color: var(--text-muted); }
.fb-add-btn svg { flex-shrink: 0; }
.fb-clear-btn { padding: 5px 8px; border-radius: 4px; border: none; background: transparent; color: var(--text-muted); font-family: inherit; font-size: 11px; cursor: pointer; transition: color 100ms; }
.fb-clear-btn:hover { color: var(--text-primary); }
.fb-dropdown {
  position: absolute;
  top: calc(100% + 4px);
  left: 0;
  min-width: 200px;
  max-height: 280px;
  background: var(--bg-elevated);
  border: 1px solid var(--border-default);
  border-radius: 6px;
  z-index: 300;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  box-shadow: 0 4px 16px rgba(0,0,0,0.3);
}
.fb-dropdown-search {
  padding: 8px 10px;
  border: none;
  border-bottom: 1px solid var(--border-subtle);
  background: transparent;
  color: var(--text-primary);
  font-family: inherit;
  font-size: 12px;
  outline: none;
}
.fb-dropdown-search::placeholder { color: var(--text-faint); }
.fb-dropdown-list { overflow-y: auto; flex: 1; padding: 4px 0; }
.fb-dropdown-item {
  padding: 6px 12px;
  font-size: 12px;
  color: var(--text-secondary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 8px;
  transition: background 80ms, color 80ms;
}
.fb-dropdown-item.focused { background: var(--bg-active); color: var(--text-primary); }
.fb-dropdown-item.selected { color: var(--text-primary); font-weight: 500; }
.fb-dropdown-item:hover { background: var(--bg-active); color: var(--text-primary); }
.fb-dropdown-empty { padding: 16px 12px; font-size: 12px; color: var(--text-muted); text-align: center; }
.fb-dropdown-done {
  padding: 8px 12px;
  border-top: 1px solid var(--border-subtle);
  font-size: 11px;
  color: var(--text-secondary);
  cursor: pointer;
  text-align: center;
  transition: background 80ms, color 80ms;
}
.fb-dropdown-done:hover { background: var(--bg-active); color: var(--text-primary); }
.fb-check { width: 14px; height: 14px; border: 1px solid var(--border-input); border-radius: 3px; display: inline-flex; align-items: center; justify-content: center; font-size: 10px; flex-shrink: 0; color: transparent; transition: background 100ms, border-color 100ms, color 100ms; }
.fb-check.checked { background: var(--text-secondary); border-color: var(--text-secondary); color: #fff; }

/* ================================================================
   Diff / Agent slide-over panel
   ================================================================ */
.diff-panel { position: fixed; top: 0; right: 0; width: 55vw; height: 100vh; background: var(--bg-surface); border-left: 1px solid var(--border-default); z-index: 200; display: flex; flex-direction: column; transform: translateX(100%); transition: transform 200ms ease; }
.diff-panel.open { transform: translateX(0); }
.diff-backdrop { position: fixed; inset: 0; background: var(--backdrop-bg); z-index: 199; opacity: 0; pointer-events: none; transition: opacity 200ms ease; }
.diff-backdrop.open { opacity: 1; pointer-events: auto; }
.diff-panel-header { padding: 16px 20px 12px; border-bottom: 1px solid var(--border-subtle); flex-shrink: 0; }
.diff-panel-title { font-size: 15px; font-weight: 600; color: var(--text-heading); margin-bottom: 4px; }
.diff-panel-branch { font-size: 12px; color: var(--text-secondary); font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace; margin-bottom: 8px; }
.diff-panel-commits { display: flex; flex-wrap: wrap; gap: 6px; }
.diff-panel-commit { font-size: 11px; font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace; background: var(--bg-active); color: var(--text-secondary); padding: 2px 8px; border-radius: 4px; }
.diff-panel-close { position: absolute; top: 14px; right: 16px; background: none; border: none; color: var(--text-muted); font-size: 22px; cursor: pointer; line-height: 1; padding: 4px; transition: color 100ms; }
.diff-panel-close:hover { color: var(--text-primary); }
.diff-panel-tabs { display: flex; gap: 0; padding: 0 20px; border-bottom: 1px solid var(--border-subtle); flex-shrink: 0; }
.diff-tab { padding: 8px 14px; cursor: pointer; background: transparent; border: none; border-bottom: 2px solid transparent; color: var(--text-muted); font-family: inherit; font-size: 12px; font-weight: 500; transition: color 100ms; }
.diff-tab:hover { color: var(--text-secondary); }
.diff-tab.active { color: var(--text-heading); border-bottom-color: var(--text-heading); }
.diff-panel-body { flex: 1; overflow-y: auto; padding: 16px 20px; background: var(--bg-primary); }

/* Diff file list */
.diff-file-list { display: flex; flex-direction: column; gap: 2px; }
.diff-file-list-item { display: flex; align-items: center; gap: 10px; padding: 8px 12px; border-radius: 6px; cursor: pointer; transition: background 100ms; }
.diff-file-list-item:hover { background: var(--bg-hover); }
.diff-file-list-name { font-size: 13px; font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace; color: var(--text-primary); }
.diff-file-stats { margin-left: auto; display: flex; gap: 6px; font-size: 11px; font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace; }
.diff-file-add { color: var(--semantic-green); }
.diff-file-del { color: var(--semantic-red); }
.diff-empty { color: var(--text-muted); font-size: 13px; padding: 24px; text-align: center; }
.commit-list { display: flex; flex-direction: column; gap: 4px; }
.commit-item { border: 1px solid var(--border-subtle); border-radius: 6px; overflow: hidden; }
.commit-header { display: flex; align-items: center; gap: 8px; padding: 10px 12px; cursor: pointer; transition: background 100ms; }
.commit-header:hover { background: var(--bg-hover); }
.commit-expand-icon { font-size: 10px; color: var(--text-muted); width: 12px; flex-shrink: 0; }
.commit-sha { font-size: 12px; font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace; color: var(--text-secondary); background: var(--bg-active); padding: 2px 6px; border-radius: 4px; flex-shrink: 0; }
.commit-message { font-size: 13px; color: var(--text-primary); overflow: hidden; text-overflow: ellipsis; white-space: nowrap; flex: 1; }
.commit-repo-label { font-size: 11px; color: var(--text-muted); background: var(--bg-active); padding: 2px 6px; border-radius: 4px; flex-shrink: 0; }
.commit-diff { border-top: 1px solid var(--border-subtle); max-height: 500px; overflow-y: auto; }
@media (max-width: 900px) { .diff-panel { width: 100vw; } }

/* ================================================================
   ReviewableDiff
   ================================================================ */
.rc-reviewable-diff { font-size: 13px; }
.rc-diff-summary { font-size: 12px; color: var(--text-muted); margin-bottom: 8px; display: flex; align-items: center; gap: 8px; }
.rc-comment-badge { font-size: 11px; font-weight: 600; background: var(--bg-active); color: var(--text-secondary); padding: 2px 8px; border-radius: 10px; }
.rc-old-toggle { font-size: 12px; color: var(--text-muted); margin-bottom: 8px; }
.rc-old-toggle input { margin-right: 4px; vertical-align: middle; }

.rc-file { border: 1px solid var(--border-subtle); border-radius: 6px; margin-bottom: 8px; overflow: hidden; }
.rc-file-header { display: flex; align-items: center; gap: 8px; padding: 8px 12px; cursor: pointer; background: var(--bg-hover); transition: background 100ms; }
.rc-file-header:hover { background: var(--bg-active); }
.rc-file-toggle { font-size: 10px; color: var(--text-muted); width: 12px; flex-shrink: 0; }
.rc-file-name { font-size: 12px; font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace; color: var(--text-primary); }
.rc-file-stats { margin-left: auto; display: flex; gap: 6px; font-size: 11px; font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace; }
.rc-file-add { color: var(--semantic-green); }
.rc-file-del { color: var(--semantic-red); }
.rc-file-comment-count { font-size: 10px; color: var(--text-secondary); background: var(--bg-active); padding: 1px 6px; border-radius: 8px; }
.rc-file-body { background: var(--bg-surface); }
.rc-file-level-comment { padding: 8px 12px; border-bottom: 1px solid var(--border-subtle); }

.rc-diff-table { width: 100%; border-collapse: collapse; table-layout: fixed; }
.rc-diff-table tr { border: none; }
.rc-hunk-header-cell { padding: 6px 12px; background: var(--diff-hunk-bg); color: var(--text-muted); font-size: 11px; font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace; border-top: 1px solid var(--border-subtle); }
.rc-gutter { width: 40px; min-width: 40px; max-width: 40px; text-align: right; padding: 0 6px; font-size: 11px; font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace; color: var(--text-faint); background: var(--bg-surface); user-select: none; vertical-align: top; border-right: 1px solid var(--border-subtle); }
.rc-gutter-action { width: 24px; min-width: 24px; max-width: 24px; text-align: center; padding: 0; background: var(--bg-surface); border-right: 1px solid var(--border-subtle); position: relative; }
.rc-add-comment-btn { display: none; width: 18px; height: 18px; padding: 0; margin: 0 auto; border: none; border-radius: 50%; background: var(--text-secondary); color: var(--bg-primary); font-size: 14px; font-weight: 700; line-height: 18px; cursor: pointer; }
.rc-line:hover .rc-add-comment-btn { display: block; }
.rc-code { padding: 0 8px; background: var(--bg-surface); }
.rc-code-pre { margin: 0; padding: 1px 0; font-size: 12px; font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace; color: var(--text-secondary); white-space: pre-wrap; word-break: break-all; overflow-wrap: break-word; }
.rc-line-add .rc-code { background: var(--diff-add-bg); }
.rc-line-add .rc-code-pre { color: var(--diff-add-text); }
.rc-line-add .rc-gutter { background: var(--diff-add-bg); }
.rc-line-del .rc-code { background: var(--diff-del-bg); }
.rc-line-del .rc-code-pre { color: var(--diff-del-text); }
.rc-line-del .rc-gutter { background: var(--diff-del-bg); }

/* Inline comment */
.rc-comment-row td { padding: 0; }
.rc-comment-cell { padding: 0 8px 4px 8px; background: var(--bg-surface); }
.rc-comment { background: var(--bg-hover); border: 1px solid var(--border-subtle); border-radius: 6px; padding: 8px 10px; margin: 4px 0; }
.rc-comment-dimmed { opacity: 0.5; border-style: dashed; }
.rc-comment-header { display: flex; align-items: center; gap: 6px; padding-bottom: 4px; margin-bottom: 4px; border-bottom: 1px solid var(--border-subtle); }
.rc-comment-author { font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace; font-size: 12px; font-weight: 400; color: var(--text-primary); }
.rc-comment-attempt { font-size: 10px; color: var(--text-faint); background: var(--bg-active); padding: 1px 5px; border-radius: 4px; }
.rc-comment-actions { margin-left: auto; display: flex; gap: 4px; opacity: 0; transition: opacity 100ms; }
.rc-comment:hover .rc-comment-actions { opacity: 1; }
.rc-comment-action { background: none; border: none; color: var(--text-muted); cursor: pointer; padding: 2px; border-radius: 3px; display: flex; align-items: center; }
.rc-comment-action:hover { color: var(--text-primary); background: var(--bg-active); }
.rc-comment-delete:hover { color: var(--semantic-red); }
.rc-comment-body { font-size: 12px; color: var(--text-secondary); line-height: 1.4; white-space: pre-wrap; }

/* Comment form */
.rc-comment-form { background: var(--bg-hover); border: 1px solid var(--text-muted); border-radius: 6px; padding: 8px; margin: 4px 0; }
.rc-comment-textarea { width: 100%; border: 1px solid var(--border-subtle); border-radius: 6px; background: var(--bg-primary); color: var(--text-primary); font-size: 12px; font-family: inherit; padding: 6px 8px; resize: vertical; outline: none; box-sizing: border-box; }
.rc-comment-textarea:focus { border-color: var(--text-muted); }
.rc-comment-form-actions { display: flex; justify-content: flex-end; gap: 6px; margin-top: 6px; }
.rc-btn { padding: 4px 12px; border-radius: 6px; font-size: 11px; font-weight: 500; font-family: inherit; cursor: pointer; border: 1px solid transparent; transition: background 100ms; }
.rc-btn-cancel { background: transparent; color: var(--text-muted); border-color: var(--border-default); }
.rc-btn-cancel:hover { color: var(--text-secondary); }
.rc-btn-save { background: var(--text-secondary); color: var(--bg-primary); border: none; }
.rc-btn-save:hover { background: var(--text-primary); }
.rc-btn-save:disabled { opacity: 0.4; cursor: not-allowed; }
.rc-review-attempt-label { font-size: 11px; color: var(--text-muted); margin-bottom: 4px; }

/* ================================================================
   Agent panel content
   ================================================================ */
.agent-msg { padding: 10px 12px; border-bottom: 1px solid var(--border-subtle); }
.agent-msg.unread { border-left: 2px solid var(--text-secondary); }
.agent-msg.pending { border-left: 2px solid var(--semantic-yellow); }
.agent-msg-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px; }
.agent-msg-sender { font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace; font-weight: 400; font-size: 12px; color: var(--text-primary); }
.agent-msg-time { font-size: 11px; color: var(--text-muted); display: flex; align-items: center; gap: 4px; }
.agent-msg-body { font-size: 12px; color: var(--text-secondary); line-height: 1.5; }
.agent-msg-body.collapsed { display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; cursor: pointer; }

.agent-log-session { margin-bottom: 12px; }
.agent-log-header { cursor: pointer; padding: 8px 12px; background: var(--bg-surface); border-radius: 6px; font-size: 12px; color: var(--text-secondary); display: flex; align-items: center; gap: 8px; }
.agent-log-header:hover { background: var(--bg-active); }
.agent-log-arrow { font-size: 10px; color: var(--text-muted); transition: transform 150ms; }
.agent-log-arrow.expanded { transform: rotate(90deg); }
.agent-log-content { font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace; font-size: 11px; line-height: 1.5; color: var(--text-secondary); padding: 8px 12px; white-space: pre-wrap; max-height: 400px; overflow-y: auto; display: none; }
.agent-log-content.expanded { display: block; }

/* Agent Activity tab */
.agent-activity-log { font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace; font-size: 11px; line-height: 1.6; padding: 8px 12px; overflow-y: auto; max-height: calc(100vh - 200px); }
.agent-activity-entry { display: flex; gap: 8px; align-items: baseline; padding: 1px 0; border-bottom: 1px solid var(--border-subtle); }
.agent-activity-ts { color: var(--text-muted); flex-shrink: 0; font-size: 10px; min-width: 65px; font-variant-numeric: tabular-nums; }
.agent-activity-task { font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace; font-size: 10px; color: var(--text-muted); flex-shrink: 0; cursor: pointer; }
.agent-activity-task:hover { text-decoration: underline; color: var(--text-secondary); }
.agent-activity-tool { color: var(--text-secondary); font-weight: 600; flex-shrink: 0; min-width: 50px; text-transform: lowercase; }
.agent-activity-tool-bash { color: #8a8a8a; }
.agent-activity-tool-edit, .agent-activity-tool-write, .agent-activity-tool-multiedit { color: #8a8a8a; }
.agent-activity-tool-read { color: #8a8a8a; }
.agent-activity-tool-grep, .agent-activity-tool-glob { color: #8a8a8a; }
.agent-activity-detail { color: var(--text-muted); overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }

.agent-markdown-content { padding: 12px 16px; line-height: 1.6; color: var(--text-primary); font-size: 13px; letter-spacing: 0.01em; }
.agent-markdown-content h1, .agent-markdown-content h2, .agent-markdown-content h3 { margin: 16px 0 6px; color: var(--text-heading); line-height: 1.4; }
.agent-markdown-content h1:first-child, .agent-markdown-content h2:first-child, .agent-markdown-content h3:first-child { margin-top: 0; }
.agent-markdown-content h1 { font-size: 18px; font-weight: 700; } .agent-markdown-content h2 { font-size: 15px; font-weight: 600; } .agent-markdown-content h3 { font-size: 14px; font-weight: 600; }
.agent-markdown-content ul, .agent-markdown-content ol { padding-left: 20px; margin: 10px 0; }
.agent-markdown-content li { margin: 4px 0; }
.agent-markdown-content code { background: var(--bg-active); padding: 1px 4px; border-radius: 3px; font-size: 12px; }
.agent-markdown-content pre { background: var(--bg-active); padding: 8px 12px; border-radius: 6px; overflow-x: auto; }
.agent-markdown-content pre code { background: none; padding: 0; }
.agent-markdown-content p { margin: 10px 0; }

/* ================================================================
   Task detail side panel
   ================================================================ */
.task-panel { position: fixed; top: 0; right: 0; width: 55vw; max-width: 720px; height: 100vh; background: var(--bg-surface); border-left: 1px solid var(--border-default); z-index: 200; display: flex; flex-direction: column; transform: translateX(100%); transition: transform 200ms ease; }
.task-panel.open { transform: translateX(0); }
.task-backdrop { position: fixed; inset: 0; background: var(--backdrop-bg); z-index: 199; opacity: 0; pointer-events: none; transition: opacity 200ms ease; }
.task-backdrop.open { opacity: 1; pointer-events: auto; }
.task-panel-header { padding: 16px 20px 12px; border-bottom: 1px solid var(--border-subtle); flex-shrink: 0; position: relative; }
.task-panel-title-row { display: flex; align-items: center; gap: 10px; margin-bottom: 6px; }
.task-panel-id { font-size: 13px; font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace; color: var(--text-muted); font-variant-numeric: tabular-nums; flex-shrink: 0; }
.task-panel-title { font-size: 15px; font-weight: 600; color: var(--text-heading); overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.task-panel-meta-row { display: flex; align-items: center; gap: 10px; }
.task-panel-meta-row .badge { font-size: 12px; padding: 4px 10px; }
.task-panel-assignee { font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace; font-size: 12px; color: var(--text-secondary); }
.task-panel-priority { font-size: 12px; color: var(--text-muted); }
.task-panel-close { position: absolute; top: 14px; right: 16px; background: none; border: none; color: var(--text-muted); font-size: 22px; cursor: pointer; line-height: 1; padding: 8px; transition: color 100ms; }
.task-panel-close:hover { color: var(--text-primary); }
.task-panel-tabs { display: flex; gap: 0; border-bottom: 1px solid var(--border-subtle); padding: 0 20px; flex-shrink: 0; background: var(--bg-surface); }
.task-panel-tab { background: none; border: none; color: var(--text-muted); font-size: 13px; font-weight: 500; padding: 8px 16px; cursor: pointer; border-bottom: 2px solid transparent; transition: color 100ms; }
.task-panel-tab:hover { color: var(--text-heading); }
.task-panel-tab.active { color: var(--text-heading); border-bottom-color: var(--text-heading); }
.task-panel-body { flex: 1; overflow-y: auto; padding: 16px 20px; background: var(--bg-primary); }
.task-panel-section { margin-bottom: 20px; }
.task-panel-section-label { font-size: 11px; text-transform: uppercase; letter-spacing: 0.06em; color: var(--text-muted); margin-bottom: 6px; }
.task-panel-meta-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-bottom: 20px; }
.task-panel-meta-item { background: var(--bg-surface); border-radius: 6px; padding: 10px 14px; }
.task-panel-meta-item .task-detail-label { font-size: 10px; text-transform: uppercase; letter-spacing: 0.06em; color: var(--text-muted); margin-bottom: 4px; }
.task-panel-meta-item .task-detail-value { font-size: 13px; color: var(--text-primary); font-variant-numeric: tabular-nums; }
.task-panel-desc { color: var(--text-primary); font-size: 14px; line-height: 1.6; word-break: break-word; padding: 10px 14px 10px 0; border-top: 1px solid var(--border-subtle); white-space: pre-wrap; }

.task-desc-wrapper {
  position: relative;
}

.task-desc-wrapper.collapsed .task-panel-desc {
  max-height: 110px;
  overflow: hidden;
}

.task-desc-fade-overlay {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 40px;
  background: linear-gradient(transparent, var(--bg-primary));
  pointer-events: none;
}

.task-desc-expand-btn {
  background: none;
  border: none;
  color: var(--text-secondary);
  font-size: 12px;
  padding: 2px 0;
  cursor: pointer;
  font-family: inherit;
  margin-top: 4px;
}

.task-desc-expand-btn:hover {
  color: var(--text-primary);
  text-decoration: underline;
}

.task-attachments { display: flex; flex-direction: column; gap: 6px; padding: 8px 0; }
.task-attachment { display: flex; align-items: center; gap: 8px; font-size: 13px; padding: 6px 10px; background: var(--bg-active); border-radius: 6px; }
.task-attachment-icon { font-size: 15px; flex-shrink: 0; }
.task-attachment-name { color: var(--text-secondary); cursor: pointer; word-break: break-all; font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace; font-size: 12px; }
.task-attachment-name:hover { text-decoration: underline; }
.task-panel-dates { display: flex; gap: 24px; font-size: 11px; color: var(--text-muted); align-items: center; margin-bottom: 20px; }
.task-panel-vcs-row { display: flex; align-items: center; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }
.task-panel-diff-section { margin-top: 20px; }
.task-panel-diff-tabs { display: flex; gap: 0; margin-bottom: 10px; position: sticky; top: 0; z-index: 1; background: var(--bg-primary); padding: 4px 0; }
.task-panel-diff-tabs .diff-tab { padding: 6px 12px; cursor: pointer; background: transparent; border: none; border-bottom: 2px solid transparent; color: var(--text-muted); font-family: inherit; font-size: 12px; font-weight: 500; transition: color 100ms; }
.task-panel-diff-tabs .diff-tab:hover { color: var(--text-secondary); }
.task-panel-diff-tabs .diff-tab.active { color: var(--text-heading); border-bottom-color: var(--text-heading); }
@media (max-width: 900px) { .task-panel { width: 100vw; max-width: none; } }
@media (max-width: 600px) { .task-panel-meta-grid { grid-template-columns: repeat(2, 1fr); } }

/* ================================================================
   Clickable items — consistent hover underline
   Task refs: monospace
   Agent names: capitalize (handled in JS with cap())
   File paths: monospace
   URLs: default link behavior
   ================================================================ */
.task-link {
  font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace;
  color: var(--text-secondary);
  cursor: pointer;
  font-size: 0.95em;
  transition: text-decoration 100ms;
}
.task-link:hover { text-decoration: underline; }

.agent-link {
  font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace;
  color: var(--text-primary);
  font-weight: 400;
  font-size: 0.95em;
  cursor: pointer;
  transition: text-decoration 100ms;
}
.agent-link:hover { text-decoration: underline; }

.file-link {
  font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace;
  color: var(--text-secondary);
  cursor: pointer;
  font-size: 0.95em;
  text-decoration: none;
}
.file-link:hover { text-decoration: underline; }

/* ================================================================
   Custom select (Cursor-style dropdown)
   ================================================================ */
.csel-wrap { position: relative; display: inline-block; }
.csel-trigger {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  background: var(--bg-active);
  color: var(--text-secondary);
  border: 1px solid var(--border-subtle);
  border-radius: 6px;
  padding: 4px 8px 4px 10px;
  font-family: var(--font-mono);
  font-size: 12px;
  cursor: pointer;
  transition: border-color 100ms, color 100ms;
  white-space: nowrap;
  line-height: 1.4;
}
.csel-trigger:hover { border-color: var(--text-muted); color: var(--text-primary); }
.csel-trigger.csel-open { border-color: var(--border-focus); color: var(--text-primary); }
.csel-chevron { flex-shrink: 0; color: var(--text-muted); transition: transform 120ms; }
.csel-trigger.csel-open .csel-chevron { transform: rotate(180deg); }
.csel-label { overflow: hidden; text-overflow: ellipsis; }
.csel-menu {
  position: absolute;
  bottom: calc(100% + 4px);
  left: 0;
  min-width: 100%;
  max-height: 240px;
  overflow-y: auto;
  background: var(--bg-elevated);
  border: 1px solid var(--border-default);
  border-radius: 8px;
  padding: 4px 0;
  z-index: 500;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4);
}
/* Filter selects at top: dropdown opens downward */
.chat-filter-select .csel-menu {
  bottom: auto;
  top: calc(100% + 4px);
}
.csel-option {
  display: flex;
  align-items: center;
  gap: 8px;
  width: 100%;
  padding: 6px 12px;
  background: none;
  border: none;
  color: var(--text-secondary);
  font-family: var(--font-mono);
  font-size: 12px;
  cursor: pointer;
  text-align: left;
  transition: background 80ms;
}
.csel-option:hover { background: var(--bg-active); color: var(--text-primary); }
.csel-option.csel-selected { color: var(--text-primary); }
.csel-check {
  width: 14px;
  flex-shrink: 0;
  font-size: 12px;
  color: var(--text-secondary);
  text-align: center;
}
.csel-option-label { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }

/* ================================================================
   Copy button — inline icon, visible ONLY on hover of .copyable parent
   ================================================================ */
.copy-btn {
  display: none;
  align-items: center;
  justify-content: center;
  margin-left: 4px;
  padding: 1px;
  cursor: pointer;
  color: var(--text-faint);
  transition: color 120ms ease;
  vertical-align: middle;
  line-height: 1;
  border-radius: 3px;
}
.copyable:hover .copy-btn { display: inline-flex; }
.copy-btn:hover { color: var(--text-secondary); }
.copy-btn.copied { display: inline-flex; color: var(--text-secondary); }

/* ================================================================
   Mic button recording pulse
   ================================================================ */
@keyframes mic-pulse { 0%, 100% { box-shadow: 0 0 0 0 rgba(241,76,76,0.3); } 50% { box-shadow: 0 0 0 6px rgba(241,76,76,0); } }
.chat-tool-btn.recording { animation: mic-pulse 1.5s ease-in-out infinite; }

/* ================================================================
   Scrollbar
   ================================================================ */
::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--scrollbar-thumb); border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: var(--scrollbar-hover); }

/* ================================================================
   Markdown content styles
   ================================================================ */
.md-content { white-space: normal; letter-spacing: 0.01em; }
.md-content > *:first-child { margin-top: 0; }
.md-content > *:last-child { margin-bottom: 0; }
.md-content p { margin: 0.75em 0; }
.md-content h1 { font-size: 1.4em; font-weight: 700; color: var(--text-heading); margin: 1.2em 0 0.5em; line-height: 1.4; }
.md-content h1:first-child { margin-top: 0; }
.md-content h2 { font-size: 1.2em; font-weight: 600; color: var(--text-heading); margin: 1.2em 0 0.5em; line-height: 1.4; }
.md-content h2:first-child { margin-top: 0; }
.md-content h3 { font-size: 1.1em; font-weight: 600; color: var(--text-heading); margin: 1.2em 0 0.5em; line-height: 1.4; }
.md-content h3:first-child { margin-top: 0; }
.md-content h4, .md-content h5, .md-content h6 { font-size: 1em; font-weight: 600; color: var(--text-heading); margin: 1.2em 0 0.5em; line-height: 1.4; }
.md-content h4:first-child, .md-content h5:first-child, .md-content h6:first-child { margin-top: 0; }
.md-content code {
  font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace;
  font-size: 0.9em;
  background: var(--bg-active);
  padding: 0.15em 0.4em;
  border-radius: 4px;
  color: var(--text-primary);
}
.md-content pre {
  background: var(--bg-inset);
  padding: 12px 14px;
  border-radius: 6px;
  overflow-x: auto;
  margin: 0.5em 0;
  border: 1px solid var(--border-subtle);
}
.md-content pre code {
  background: transparent;
  padding: 0;
  border-radius: 0;
  font-size: 0.85em;
  line-height: 1.5;
  color: var(--text-secondary);
}
.md-content ul, .md-content ol { margin: 0.75em 0; padding-left: 1.6em; }
.md-content ul { list-style-type: disc; }
.md-content ol { list-style-type: decimal; }
.md-content li { margin: 0.3em 0; }
.md-content li > ul, .md-content li > ol { margin: 0.2em 0; }
.md-content ul.contains-task-list { list-style: none; padding-left: 0.4em; }
.md-content li.task-list-item { display: flex; align-items: baseline; gap: 6px; }
.md-content li.task-list-item input[type="checkbox"] { margin: 0; accent-color: var(--text-secondary); }
.md-content a {
  color: var(--text-secondary);
  text-decoration: none;
}
.md-content a:hover { text-decoration: underline; }
.md-content blockquote {
  border-left: 3px solid var(--border-default);
  padding: 0.3em 0 0.3em 12px;
  margin: 0.5em 0;
  color: var(--text-muted);
}
.md-content blockquote p { margin: 0.2em 0; }
.md-content hr { border: none; border-top: 1px solid var(--border-default); margin: 0.6em 0; }
.md-content table { border-collapse: collapse; width: 100%; margin: 0.5em 0; font-size: 0.9em; }
.md-content th, .md-content td { border: 1px solid var(--border-default); padding: 6px 10px; text-align: left; }
.md-content th { background: var(--bg-active); font-weight: 600; color: var(--text-heading); }
.md-content tr:nth-child(even) td { background: var(--bg-hover); }
.md-content img { max-width: 100%; height: auto; border-radius: 6px; margin: 0.4em 0; }
.md-content del { color: var(--text-muted); }
.md-content strong { font-weight: 600; color: var(--text-primary); }
.md-content em { font-style: italic; }

/* ================================================================
   File viewer panel content
   ================================================================ */
.file-viewer-header { padding: 16px 20px 12px; border-bottom: 1px solid var(--border-subtle); flex-shrink: 0; }
.file-viewer-content { padding: 4px 0; }
.file-viewer-code {
  font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace;
  font-size: 12px;
  line-height: 1.6;
  color: var(--text-secondary);
  background: var(--bg-inset);
  padding: 14px 16px;
  border-radius: 6px;
  border: 1px solid var(--border-subtle);
  overflow-x: auto;
  white-space: pre;
  tab-size: 4;
}
.file-viewer-code code { background: transparent; padding: 0; font-size: inherit; color: inherit; }
.file-viewer-image { display: flex; justify-content: center; align-items: center; padding: 20px; }
.file-viewer-image img { max-width: 100%; max-height: 80vh; height: auto; border-radius: 6px; border: 1px solid var(--border-subtle); }
.file-viewer-html { flex: 1; display: flex; flex-direction: column; padding: 0; }
.file-viewer-iframe { width: 100%; flex: 1; min-height: 400px; border: none; border-radius: 6px; background: #ffffff; }
.file-breadcrumb-dir { color: var(--text-muted); }
.file-breadcrumb-sep { color: var(--text-faint); margin: 0 2px; }
.file-breadcrumb-current { color: var(--text-heading); font-weight: 600; }

/* ================================================================
   Task activity timeline (in task panel)
   ================================================================ */
.task-activity-section { margin-bottom: 20px; }
.task-activity-header {
  display: flex;
  align-items: center;
  gap: 8px;
  cursor: pointer;
  padding: 4px 0;
  margin-bottom: 8px;
}
.task-activity-header:hover { color: var(--text-primary); }
.task-activity-arrow { font-size: 10px; color: var(--text-muted); transition: transform 150ms; }
.task-activity-arrow.expanded { transform: rotate(90deg); }
.task-activity-list { display: none; }
.task-activity-list.expanded { display: flex; flex-direction: column; }
.task-activity-event {
  display: flex;
  align-items: flex-start;
  gap: 8px;
  padding: 6px 0;
  font-size: 12px;
  border-bottom: 1px solid var(--border-subtle);
}
.task-activity-event:last-child { border-bottom: none; }
.task-activity-icon { width: 20px; text-align: center; flex-shrink: 0; font-size: 13px; padding-top: 1px; color: var(--text-muted); }
.task-activity-text { flex: 1; color: var(--text-secondary); line-height: 1.4; }
.task-activity-time { color: var(--text-muted); font-size: 11px; flex-shrink: 0; white-space: nowrap; font-variant-numeric: tabular-nums; }

/* Task Comments in Activity Timeline */
.task-comment-entry { flex-direction: column !important; gap: 4px !important; padding: 8px 0 !important; }
.task-comment-entry .task-activity-icon { position: absolute; }
.task-comment-entry { position: relative; padding-left: 28px !important; }
.task-comment-body { flex: 1; }
.task-comment-meta { display: flex; align-items: center; gap: 8px; margin-bottom: 2px; }
.task-comment-author { font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace; font-weight: 400; font-size: 12px; color: var(--text-primary); }
.task-comment-text { font-size: 12px; color: var(--text-secondary); line-height: 1.5; white-space: pre-wrap; word-break: break-word; }
.task-comment-input-row { display: flex; align-items: center; gap: 6px; padding: 8px 0 4px; border-top: 1px solid var(--border-subtle); margin-top: 4px; }
.task-comment-input {
  flex: 1;
  border: 1px solid var(--border-default);
  border-radius: 6px;
  padding: 6px 10px;
  font-size: 12px;
  background: var(--bg-input);
  color: var(--text-primary);
  outline: none;
}
.task-comment-input:focus { border-color: var(--text-muted); }
.task-comment-submit {
  padding: 6px 10px;
  border: 1px solid var(--border-default);
  border-radius: 6px;
  background: transparent;
  color: var(--text-secondary);
  font-size: 12px;
  cursor: pointer;
  flex-shrink: 0;
}
.task-comment-submit:hover:not(:disabled) { color: var(--text-primary); border-color: var(--text-muted); }
.task-comment-submit:disabled { opacity: 0.4; cursor: not-allowed; }

/* ================================================================
   Toast Notifications
   ================================================================ */
.toast-container {
  position: fixed;
  bottom: 20px;
  right: 20px;
  z-index: 10000;
  display: flex;
  flex-direction: column;
  gap: 8px;
  max-width: 400px;
  pointer-events: none;
}
.toast {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  padding: 12px 16px;
  border-radius: 6px;
  border: 1px solid var(--border-default);
  background: var(--bg-elevated);
  color: var(--text-primary);
  font-size: 14px;
  line-height: 1.4;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  animation: toast-slide-in 0.2s ease-out;
  pointer-events: auto;
}
@keyframes toast-slide-in {
  from { transform: translateX(100%); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
}
.toast-error { border-left: 3px solid var(--semantic-red); }
.toast-success { border-left: 3px solid var(--semantic-green); }
.toast-info { border-left: 3px solid var(--text-secondary); }
.toast-message { flex: 1; word-break: break-word; }
.toast-close {
  flex-shrink: 0;
  background: none;
  border: none;
  color: var(--text-muted);
  cursor: pointer;
  font-size: 20px;
  line-height: 1;
  padding: 0;
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: color 100ms;
}
.toast-close:hover { color: var(--text-primary); }

/* ================================================================
   Legacy compat — old sidebar class names (kept for safety)
   ================================================================ */
.sidebar-task-dot { width: 6px; height: 6px; border-radius: 50%; flex-shrink: 0; display: inline-block; }
.sidebar-task-dot.dot-todo { background: var(--status-todo); }
.sidebar-task-dot.dot-in_progress { background: var(--status-in-progress); }
.sidebar-task-dot.dot-in_review { background: var(--status-in-review); }
.sidebar-task-dot.dot-in_approval { background: var(--status-in-approval); }
.sidebar-task-dot.dot-merging { background: var(--status-merging); }
.sidebar-task-dot.dot-done { background: var(--status-done); }
.sidebar-task-dot.dot-rejected { background: var(--status-rejected); }
.sidebar-task-dot.dot-merge_failed { background: var(--status-merge_failed); }
.sidebar-task-dot.dot-cancelled { background: var(--status-cancelled); }
.sidebar-agent-dot { width: 6px; height: 6px; border-radius: 50%; flex-shrink: 0; }
.sidebar-agent-dot.dot-active { background: var(--dot-active); }
.sidebar-agent-dot.dot-stale { background: var(--dot-stale); }
.sidebar-agent-dot.dot-stuck { background: var(--dot-stuck); }
.sidebar-agent-dot.dot-offline { background: var(--dot-offline); }
.sidebar-task-id { font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace; font-variant-numeric: tabular-nums; font-size: 11px; color: var(--text-muted); }

/* ================================================================
   Help Overlay — Keyboard shortcuts modal
   ================================================================ */
.help-backdrop {
  position: fixed;
  inset: 0;
  background: var(--backdrop-bg);
  z-index: 299;
  opacity: 0;
  pointer-events: none;
  transition: opacity 200ms ease;
}
.help-backdrop.open {
  opacity: 1;
  pointer-events: auto;
}

.help-overlay {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) scale(0.95);
  width: 90%;
  max-width: 480px;
  background: var(--bg-surface);
  border: 1px solid var(--border-default);
  border-radius: 8px;
  z-index: 300;
  opacity: 0;
  pointer-events: none;
  transition: opacity 200ms ease, transform 200ms ease;
  box-shadow: 0 8px 24px rgba(0,0,0,0.3);
}
.help-overlay.open {
  opacity: 1;
  pointer-events: auto;
  transform: translate(-50%, -50%) scale(1);
}

.help-overlay-header {
  padding: 20px 24px 16px;
  border-bottom: 1px solid var(--border-subtle);
}

.help-overlay-title {
  font-size: 16px;
  font-weight: 600;
  color: var(--text-heading);
  margin: 0;
}

.help-overlay-body {
  padding: 20px 24px 24px;
  display: flex;
  flex-direction: column;
  gap: 14px;
}

.help-shortcut-row {
  display: flex;
  align-items: center;
  gap: 16px;
}

.help-shortcut-key {
  display: inline-block;
  min-width: 48px;
  padding: 6px 12px;
  background: var(--bg-input);
  border: 1px solid var(--border-input);
  border-radius: 4px;
  font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace;
  font-size: 13px;
  color: var(--text-heading);
  text-align: center;
  flex-shrink: 0;
  box-shadow: 0 1px 2px rgba(0,0,0,0.2);
}

.help-shortcut-desc {
  font-size: 14px;
  color: var(--text-primary);
}
